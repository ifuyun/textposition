(function($){$.fn.extend({textposition:function(text){var start=0,end=0,inputEle=$(this)[0],rng,tng,i,curVal=$(this).val(),rangeText="";if(!$.support.leadingWhitespace){$(this).focus();rng=document.selection.createRange();if(rng.parentElement()===inputEle){if($(this).is("textarea")){tng=document.body.createTextRange();tng.moveToElementText(inputEle);for(start=0;tng.compareEndPoints("StartToStart",rng)<0;start+=1){tng.moveStart("character",1);}for(i=0;i<=start;i+=1){if(inputEle.value.charAt(i)==="\n"){start+=1;}}tng.moveToElementText(inputEle);for(end=0;tng.compareEndPoints("StartToEnd",rng)<0;end+=1){tng.moveStart("character",1);}for(i=0;i<=end;i+=1){if(inputEle.value.charAt(i)==="\n"){end+=1;}}}else{rangeText=rng.text;rng.moveEnd("character",curVal.length);start=curVal.length-rng.text.length;end=start+rangeText.length;}}}else{start=inputEle.selectionStart;end=inputEle.selectionEnd;}if(text){$(this).focus();$(this).val(curVal.substring(0,start)+text+curVal.substring(end,curVal.length));if(tng){tng.moveStart("character",start);tng.moveEnd("character",end-curVal.length);tng.select();}else{if(!$.support.leadingWhitespace){rng.moveStart("character",start);rng.moveEnd("character",end-curVal.length);rng.select();}else{inputEle.selectionStart=start;inputEle.selectionEnd=start+text.length;}}}else{return{start:start,end:end};}},moveposition:function(start,offset,shouldSelected){var inputEle=$(this)[0],rng;start=start||0;offset=offset===undefined?-1:offset;if(!$.support.leadingWhitespace){$(this).focus();rng=document.selection.createRange();if(rng.parentElement()===inputEle){if($(this).is("textarea")){rng=document.body.createTextRange();rng.moveToElementText(inputEle);}}}$(this).focus();if(!$.support.leadingWhitespace){if(shouldSelected){rng.moveStart("character",start);}else{rng.moveStart("character",start+offset);}if(offset<0){rng.moveEnd("character",start+offset-$(this).val().length);}else{rng.moveEnd("character",offset);}rng.select();}else{if(shouldSelected){inputEle.selectionStart=start;}else{inputEle.selectionStart=start+offset;}inputEle.selectionEnd=start+offset;}}});}(jQuery));